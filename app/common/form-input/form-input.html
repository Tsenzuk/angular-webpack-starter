<div class="form-group" ng-class="{'has-error': form[name].$invalid && form[name].$touched}">
  <label class="control-label" for="{{name}}" ng-if="!!label">{{label}}</label>
  <ng-transclude></ng-transclude>
  <div ng-messages="form[name].$error" ng-show="form[name].$touched" role="alert">
    <div ng-repeat="(messageKey, message) in messages" ng-message="{{messageKey}}" class="help-block">
      {{message}}
    </div>
  </div>
</div>
